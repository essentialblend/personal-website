document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("[data-theme-toggle]"),n=["themeLight","themeDark","themeContrast"],s={themeLight:"Light",themeDark:"Dark",themeContrast:"Contrast"},o=e=>{const n=s[e]||"Light";document.documentElement.setAttribute("data-user-theme",e),t&&(t.textContent=n)};let e=localStorage.getItem("theme")||"themeLight";s[e]||(e="themeLight",localStorage.setItem("theme",e)),o(e),t&&(t.onclick=()=>{e=n[(n.indexOf(e)+1)%n.length],localStorage.setItem("theme",e),o(e)})})
;
function updateClock(){const e=document.getElementById("site-clock");if(!e)return;const t=new Date,n={weekday:void 0,month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},s=t.toLocaleString("en-GB",{...n,timeZone:"Europe/London"}),o=t.toLocaleString("en-GB",n);e.textContent=s.replace(","," ·"),e.title=`Siddharth's local time.
Your time: ${o.replace(","," ·")}`}updateClock(),setInterval(updateClock,3e4)
;
document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("filter-controls"),i=document.getElementById("writings-list"),t=document.getElementById("subject-filter-buttons"),o=document.getElementById("clear-filters"),n=document.getElementById("show-more-filters");if(!a||!i||!t||!o)return;const u=i.querySelectorAll(".SF_BLOGPOST"),h=t.querySelectorAll(".SF_TAXONOMYFILTER_BUTTON"),d=i.querySelectorAll('section[aria-labelledby^="year-"]');let s=!1,e=new Set;function r(){o.classList.toggle("enabled",e.size>0)}function c(){if(!n)return;const o=t.querySelectorAll(".SF_TAXONOMYFILTER_BUTTON--HIDDEN"),e=o.length===0;n.classList.toggle("hidden",e),e||(n.textContent=s?"Less...":"More...")}function l(){let t=!1;d.forEach(n=>{const s=n.querySelectorAll(".SF_BLOGPOST");let o=0;s.forEach(n=>{const i=n.dataset.subjects,a=i?i.split(",").map(e=>e.trim()).filter(e=>e):[];let s=!1;e.size===0?s=!0:s=a.some(t=>e.has(t)),n.classList.toggle("hidden",!s),s&&(o++,t=!0)}),n.classList.toggle("hidden",o===0&&s.length>0)}),r()}a.addEventListener("click",i=>{const a=i.target;if(a.classList.contains("SF_TAXONOMYFILTER_BUTTON")){const t=a.dataset.subject;if(!t)return;a.classList.toggle("active"),e.has(t)?e.delete(t):e.add(t),l()}else if(a.id==="clear-filters")o.classList.contains("enabled")&&(e.clear(),t.querySelectorAll(".SF_TAXONOMYFILTER_BUTTON.active").forEach(e=>e.classList.remove("active")),l());else if(a.id==="show-more-filters"){if(!n)return;s=!s,t.classList.toggle("show-all-filters",s),c()}}),c(),r()})