{{ $firstPaintingImageUrl := "" }}
{{ with .Params.paintings }}
  {{ with index . 0 }}
    {{ $firstPaintingImageUrl = .imageUrl }}
  {{ end }}
{{ end }}

{{ $itemClass := "SF_STREAM_ARTISTGALLERY_BLOCK" }}
{{ $summaryClass := "SF_STREAM_ARTISTGALLERY_SUMMARY" }}
{{ $titleClass := "SF_STREAM_ARTISTGALLERY_TITLE" }}
{{ $hookClass := "SF_STREAM_ARTISTGALLERY_HOOK" }}
{{ $contentClass := "SF_STREAM_ARTISTGALLERY_CONTENT" }}
{{ $slideshowContainerClass := "SF_ARTISTGALLERY_SLIDESHOW_CONTAINER" }}
{{ $slidesWrapperClass := "SF_ARTISTGALLERY_SLIDES_WRAPPER" }}
{{ $slideClass := "SF_ARTISTGALLERY_SLIDE" }}
{{ $slideBgBlurClass := "SF_ARTISTGALLERY_BG_BLUR" }}
{{ $imgClass := "SF_ARTISTGALLERY_IMG" }}
{{ $captionClass := "SF_ARTISTGALLERY_CAPTION" }}
{{ $artistInfoClass := "SF_ARTIST_INFO_IN_CAPTION" }}
{{ $artistPortraitClass := "SF_ARTIST_PORTRAIT_IN_CAPTION" }}

<details class="SF_STREAM_ITEM {{ $itemClass }} LP_LEFT_SEPARATOR" {{ with $firstPaintingImageUrl }}style="--summary-bg-image: url('{{ . | absURL }}');"{{ end }}>
  <summary class="{{ $summaryClass }}">
    <div class="SF_STREAM_SUMMARY_CONTENT_WRAP">
      <h3 class="{{ $titleClass }}">{{ .Title }}</h3>
      {{ with .Params.summary }}
      <div class="{{ $hookClass }}">
        {{ . | markdownify }}
      </div>
      {{ end }}
    </div>
    <div class="SF_STREAM_INDICATOR"></div>
  </summary>

  <div class="SF_STREAM_EXPANDED_CONTENT_WRAPPER">
    <div class="{{ $contentClass }} SF_POSTCONTENT">

      {{ with .Params.paintings }}
        <div class="{{ $slideshowContainerClass }}">
          <div class="{{ $slidesWrapperClass }}">
            {{ range $index, $painting := . }}
              <div class="{{ $slideClass }}" data-slide-index="{{ $index }}" {{ if ne $index 0 }}style="display: none;"{{ end }}>
                {{ with $painting.imageUrl }}
                  <div class="{{ $slideBgBlurClass }}" style="background-image: url('{{ . | absURL }}');"></div>
                  {{ $altText := printf "%s - %s" (replace $.Title "Artist Showcase: " "") ($painting.title | default "Artwork") }}
                  <img src="{{ . | absURL }}" alt="{{ $altText }}" loading="lazy" class="{{ $imgClass }}">
                {{ end }}
                {{ if or .title .description $.Params.artistPortraitUrl }}
                <figcaption class="{{ $captionClass }}">
                  {{ with $.Params.artistPortraitUrl }}
                  <div class="{{ $artistInfoClass }}">
                    {{ $artistName := replace $.Title "Artist Showcase: " "" }}
                    <img src="{{ . | absURL }}" alt="Portrait of {{ $artistName }}" loading="lazy" class="{{ $artistPortraitClass }}">
                  </div>
                  {{ end }}
                  <div class="SF_ARTISTGALLERY_CAPTION_TEXT">
                    {{ with $painting.title }}<strong>{{ . }}</strong><br>{{ end }}
                    {{ with $painting.description }}{{ . | markdownify }}{{ end }}
                  </div>
                </figcaption>
                {{ end }}
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}

    </div>
  </div>
</details>