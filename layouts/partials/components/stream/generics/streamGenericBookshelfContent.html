{{/* streamGenericBookshelfContent.html */}}

{{ $library   := site.GetPage "section" "library" }}
{{ $books     := slice }}
{{ if $library }}
  {{ $books = where $library.Pages "File.BaseFileName" "ne" "masterlist" }}
{{ end }}
{{ $active    := where $books "Params.active" true }}
{{ $selected  := first 6 $active.ByTitle }}

<div class="SF_SHELF_BLOCK">
  <div class="SF_SHELF_LIST">
    {{ range $selected }}
      {{ $status := .Params.status | default "" }}
      {{ $statusClass := lower $status }}
      {{ $statusDisplay := cond (ne $status "") (title $status) "" }}
      {{ $writer := .Params.writer | default "" }}
      <div class="SF_SHELF_ENTRY {{ $statusClass }}">
        <a class="SF_SHELF_TITLE" href="{{ .RelPermalink }}">{{ .Title }}</a>
        <span class="SF_SHELF_META">
          {{- if $writer -}}
            {{ $writer }}{{ if $statusDisplay }} &mdash; <em>{{ $statusDisplay }}</em>{{ end }}
          {{- else if $statusDisplay -}}
            <em>{{ $statusDisplay }}</em>
          {{- end -}}
        </span>
      </div>
    {{ end }}
  </div>

  <!-- <div class="SF_SHELF_FOOTER">
    <a class="SF_SHELF_VIEWALL" href="/stream/bookshelf">View full shelf →</a>
  </div> -->
</div>
